function createTaskItem(taskData = {}) {
  const taskList = document.getElementById('task-list');
  const li = document.createElement('li');
  li.className = 'task-item';

  li.innerHTML = `
    <input type="text" class="task-name" placeholder="Task name..." />
    <button class="set-date"><span>ðŸ•‘</span> ${taskData.dueDate || 'Set Date'}</button>
    <button class="assign-member">
      ${taskData.memberAvatar ? `<img src="${taskData.memberAvatar}" class="member-avatar" />` : '<span>ðŸ‘¤</span> Assign'}
    </button>
    <button class="three-dots">&#x22EE;</button>
  `;

  const taskNameInput = li.querySelector('.task-name');
  const setDateBtn = li.querySelector('.set-date');
  const assignBtn = li.querySelector('.assign-member');
  const threeDots = li.querySelector('.three-dots');

  if (taskData.name) taskNameInput.value = taskData.name;

  setDateBtn.addEventListener('click', (e) => {
    console.log('ðŸ“† Set Date clicked (editable)');
    t.popup({
      title: 'Select Due Date',
      url: 'date-picker.html',
      height: 130,
      mouseEvent: e
    }).then(selected => {
      if (selected) {
        setDateBtn.innerHTML = `ðŸ•‘ ${selected}`;
        saveAllTasks();
      }
    }).catch(err => console.error('âŒ Error in date popup:', err));
  });

  assignBtn.addEventListener('click', (e) => {
    console.log('ðŸ‘¤ Assign Member clicked (editable)');
    t.popup({
      title: 'Assign Member',
      url: 'member-picker.html',
      height: 300,
      args: { members },
      mouseEvent: e
    }).then(selected => {
      if (selected && selected.avatar) {
        assignBtn.innerHTML = `<img src="${selected.avatar}" class="member-avatar" />`;
        saveAllTasks();
      }
    }).catch(err => console.error('âŒ Error in member popup:', err));
  });

  threeDots.addEventListener('click', (e) => {
    e.stopPropagation();
    const menu = document.createElement('div');
    menu.className = 'action-menu';
    const createOption = document.createElement('div');
    createOption.textContent = 'Create Task Card';
    createOption.addEventListener('click', () => {
      alert('Task card creation logic goes here.');
      menu.remove();
    });
    const deleteOption = document.createElement('div');
    deleteOption.textContent = 'Delete Task';
    deleteOption.addEventListener('click', () => {
      li.remove();
      saveAllTasks();
    });
    menu.appendChild(createOption);
    menu.appendChild(deleteOption);
    document.body.appendChild(menu);
    const rect = threeDots.getBoundingClientRect();
    menu.style.position = 'absolute';
    menu.style.top = rect.bottom + 'px';
    menu.style.left = rect.left + 'px';
  });

  taskNameInput.addEventListener('input', saveAllTasks);

  taskList.appendChild(li);
}
